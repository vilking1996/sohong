<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>üéüÔ∏è V√© S·ªë T·ª´ ·∫¢nh</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0; padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: url('https://c1.wallpaperflare.com/preview/348/680/5/trang-an-bai-dinh-ninh-binh-province-landscape.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #59688f;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #container {
      margin-top: 30px;
      background: rgba(0, 0, 0, 0.7);
      padding: 25px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 0 15px #ff4081;
      max-width: 90vw;
    }
    #selfieImg {
      margin: 15px auto 0 auto;
      display: block;
      max-width: 240px;
      border-radius: 10px;
    }
    #result {
      margin-top: 15px;
      white-space: pre-wrap;
      background: rgba(255,255,255,0.1);
      padding: 10px;
      border-radius: 10px;
      max-height: 35vh;
      overflow-y: auto;
      font-size: 14px;
      text-align: left;
    }
    #ticket {
      margin-top: 10px;
      font-size: 18px;
      color: #ffd700;
    }
    #countdown {
      margin-top: 10px;
      font-size: 16px;
      color: #00eaff;
    }
  </style>
</head>
<body>
  <div id="container">
    <h1>üì∑ Ch·ª•p Ho·∫∑c T·∫£i ·∫¢nh Selfie ƒê·ªÉ Nh·∫≠n V√© S·ªë</h1>
    <input type="file" accept="image/*" capture="environment" id="fileInput">
    <div id="ticket">üé´ Ch∆∞a c√≥ v√©</div>
    <img id="selfieImg" alt="·∫¢nh selfie">
    <div id="countdown">‚è≥ ƒêang ƒë·∫øm ng∆∞·ª£c...</div>
    <h3>üìÖ Danh s√°ch 255 v√© s·ªë (t·∫°o m·ªõi m·ªói ~7 ti·∫øng)</h3>
    <div id="result">ƒêang ch·ªù...</div>
  </div>

  <canvas id="fireworks" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;"></canvas>
  <audio id="winSound" src="https://tiengdong.com/wp-content/uploads/Tieng-vo-tay-hoan-ho-www_tiengdong_com.mp3  
"></audio>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
  <script>
    const fileInput = document.getElementById('fileInput');
    const ticketBox = document.getElementById('ticket');
    const selfieImg = document.getElementById('selfieImg');
    const result = document.getElementById('result');
    const fireCtx = document.getElementById('fireworks').getContext('2d');
    const winSound = document.getElementById('winSound');
    const countdownEl = document.getElementById('countdown');

    let currentFile = null;
    let countdownSeconds = 25177;

    fileInput.onchange = async (e) => {
      currentFile = e.target.files[0];
      if (!currentFile) return;
      await processFile(currentFile);
    };

    async function processFile(file) {
      const url = URL.createObjectURL(file);
      selfieImg.src = url;
      selfieImg.style.display = 'block';

      const arrayBuffer = await file.arrayBuffer();
      const hash = await crypto.subtle.digest("SHA-256", arrayBuffer);
      const hashArray = Array.from(new Uint8Array(hash));
      const numberHash = hashArray.reduce((sum, b) => sum + b, 0);
      const ticket = (numberHash % 100000).toString().padStart(5, '0');

      ticketBox.innerHTML = `üé´ V√© c·ªßa b·∫°n: <b>${ticket}</b>`;
      drawTickets(ticket);
    }

    function generateTickets(seed) {
      const set = new Set();
      Math.seedrandom(seed);
      while (set.size < 255) {
        const num = Math.floor(Math.random() * 100000).toString().padStart(5, '0');
        set.add(num);
      }
      return Array.from(set);
    }

    function drawTickets(myTicket) {
      const now = Math.floor(Date.now() / (1000 * 25177));
      const seed = now.toString();
      const tickets = generateTickets(seed);
      const winners = new Set();
      while (winners.size < 177) {
        winners.add(tickets[Math.floor(Math.random() * tickets.length)]);
      }

      result.textContent = tickets.map(t =>
        `${t} ‚Äî ${winners.has(t) ? 'üéâ 5 tri·ªáu USD' : 'üí∏ 2 tri·ªáu USD'}`
      ).join('\n');

      if (winners.has(myTicket)) {
        ticketBox.innerHTML += `<br><b style="color:lightgreen;">üéØ B·∫°n ƒë√£ TR√öNG 5 tri·ªáu USD!</b>`;
        winSound.play();
        fireEffect();
      } else {
        ticketBox.innerHTML += `<br><b style="color:pink;">üò¢ R·∫•t ti·∫øc, b·∫°n ch∆∞a tr√∫ng. H√£y th·ª≠ l·∫°i nh√©!</b>`;
      }
    }

    function fireEffect() {
      const fw = document.getElementById('fireworks');
      fw.width = window.innerWidth;
      fw.height = window.innerHeight;
      let particles = [];
      for (let i = 0; i < 100; i++) {
        particles.push({
          x: fw.width / 2,
          y: fw.height / 2,
          vx: Math.random() * 6 - 3,
          vy: Math.random() * -6 - 1,
          alpha: 1
        });
      }
      function animate() {
        fireCtx.clearRect(0, 0, fw.width, fw.height);
        particles.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          p.alpha -= 0.01;
          fireCtx.fillStyle = `rgba(255, 200, 0, ${p.alpha})`;
          fireCtx.beginPath();
          fireCtx.arc(p.x, p.y, 3, 0, 2 * Math.PI);
          fireCtx.fill();
        });
        particles = particles.filter(p => p.alpha > 0);
        if (particles.length) requestAnimationFrame(animate);
      }
      animate();
    }

    function updateCountdown() {
      const hrs = Math.floor(countdownSeconds / 3600).toString().padStart(2, '0');
      const mins = Math.floor((countdownSeconds % 3600) / 60).toString().padStart(2, '0');
      const secs = (countdownSeconds % 60).toString().padStart(2, '0');
      countdownEl.textContent = `‚è≥ C√≤n ${hrs}:${mins}:${secs} n·ªØa s·∫Ω c·∫≠p nh·∫≠t v√© s·ªë m·ªõi`;

      countdownSeconds--;

      if (countdownSeconds < 0) {
        countdownSeconds = 25177;
        if (currentFile) processFile(currentFile);
      }
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();
  </script>








  


 




  

<!-- Container ch·ª©a logo gi·ªØa khung h√¨nh ph√≠a d∆∞·ªõi -->
<div id="logo-row">
  <!-- VISA -->
  <div class="bank-logo-container">
    <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" alt="VISA" class="bank-logo">
    <canvas class="smoke-canvas"></canvas>
  </div>

  <!-- Vietcombank -->
  <div class="bank-logo-container">
    <img src="https://upload.wikimedia.org/wikipedia/vi/8/85/Vietcombank_Logo.png" alt="Vietcombank" class="bank-logo">
    <canvas class="smoke-canvas"></canvas>
  </div>

  <!-- Sacombank -->
  <div class="bank-logo-container">
    <img src="https://upload.wikimedia.org/wikipedia/commons/2/2e/Logo-Sacombank-new.png" alt="Sacombank" class="bank-logo">
    <canvas class="smoke-canvas"></canvas>
  </div>

  <!-- VietinBank -->
  <div class="bank-logo-container">
    <img src="https://upload.wikimedia.org/wikipedia/vi/9/9d/Logo_Vietinbank.png" alt="VietinBank" class="bank-logo">
    <canvas class="smoke-canvas"></canvas>
  </div>
</div>

<!-- CSS -->
<style>
  #logo-row {
    position: fixed;
    bottom: 5%;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    width: auto;
    padding: 10px;
    background: transparent;
    z-index: 9999;
    pointer-events: none;
  }

  .bank-logo-container {
    position: relative;
    width: 80px;
    height: 80px;
    flex: 0 0 auto;
  }

  .bank-logo {
    width: 100%;
    height: auto;
    animation: spin 6s linear infinite;
    position: relative;
    z-index: 2;
  }

  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .smoke-canvas {
    position: absolute;
    top: -50px;
    left: -50px;
    width: 180px;
    height: 180px;
    z-index: 1;
    pointer-events: none;
  }
</style>

<!-- JavaScript t·∫°o hi·ªáu ·ª©ng kh√≥i ƒëen -->
<script>
  document.querySelectorAll('.smoke-canvas').forEach(canvas => {
    const ctx = canvas.getContext('2d');
    canvas.width = 180;
    canvas.height = 180;
    let particles = [];

    function createParticle() {
      const angle = Math.random() * 2 * Math.PI;
      const radius = 30 + Math.random() * 20;
      const x = canvas.width / 2 + Math.cos(angle) * radius;
      const y = canvas.height / 2 + Math.sin(angle) * radius;

      particles.push({
        x,
        y,
        vx: (Math.random() - 0.5),
        vy: (Math.random() - 1.5),
        size: Math.random() * 20 + 5,
        alpha: 1
      });
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach(p => {
        ctx.beginPath();
        const gradient = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.size);
        gradient.addColorStop(0, `rgba(0,0,0,${p.alpha})`);
        gradient.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.fillStyle = gradient;
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fill();
        p.x += p.vx;
        p.y += p.vy;
        p.alpha -= 0.015;
      });
      particles = particles.filter(p => p.alpha > 0);
      requestAnimationFrame(draw);
    }

    setInterval(createParticle, 100);
    draw();
  });
</script>

</body>
</html>
